!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("dedux",[],r):"object"==typeof exports?exports.dedux=r():e.dedux=r()}(window,function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=3)}([function(e,r,n){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e,r){if(void 0===e)return[];var n=[];return function e(r,n,i,u){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(""!==n&&(o+=(o?"_":"")+n.toUpperCase()),o===r||o.endsWith("_"+r))u(o);else{if("object"!==(void 0===i?"undefined":t(i))||Array.isArray(i))return;var c=!0,a=!1,f=void 0;try{for(var l,s=Object.keys(i)[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var v=l.value;e(r,v,i[v],u,o)}}catch(e){a=!0,f=e}finally{try{!c&&s.return&&s.return()}finally{if(a)throw f}}}}(e,"",r,function(e){return n.push(e)}),n}},function(e,r,n){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function e(r,n,i){if(0===r.length)return i(n);if("object"!==(void 0===n?"undefined":t(n)))return n;var u=Object.assign({},n),o=!0,c=!1,a=void 0;try{for(var f,l=Object.keys(n)[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var s=f.value;s.toUpperCase()===r[0]&&(u[s]=e(r.slice(1),n[s],i))}}catch(e){c=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(c)throw a}}return u}},function(e,r,n){"use strict";e.exports=function(e){var r=void 0,n=void 0,t=!0,i=!1,u=void 0;try{for(var o,c=["SET_ALL","SET_IN","SET","INCREMENT_ALL","INCREMENT_IN","INCREMENT","DECREMENT_ALL","DECREMENT_IN","DECREMENT","TOGGLE_ALL","TOGGLE_IN","TOGGLE","ADD_TO","ADD","INSERT_IN","INSERT","REMOVE_ALL","REMOVE_FROM","REMOVE","MERGE_ALL","MERGE_IN","MERGE"][Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var a=o.value;if(e.startsWith(a))return{verb:r=a,path:n=e.replace(r,"").replace("_","")}}}catch(e){i=!0,u=e}finally{try{!t&&c.return&&c.return()}finally{if(i)throw u}}return{verb:r,path:n}}},function(e,r,n){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var n=[],t=!0,i=!1,u=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done)&&(n.push(o.value),!r||n.length!==r);t=!0);}catch(e){i=!0,u=e}finally{try{!t&&c.return&&c.return()}finally{if(i)throw u}}return n}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function c(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)}var a=n(2),f=n(1),l=n(0),s=function(e,r){var n=l(e,r);if(0===n.length)throw new Error("Path not found.");if(n.length>1)throw new Error("Path not unique, try a longer path specification.");return n[0].split("_")};e.exports=function(e){return function(r,n){var l=e(r,n);return l!==r?l:"number"==typeof r?function(e,r){switch(r.type){case"INCREMENT":return e+r.value;case"DECREMENT":return e-r.value;case"SET":return r.value;default:return e}}(r,n):"boolean"==typeof r?function(e,r){switch(r.type){case"SET":return r.value;case"TOGGLE":return!e;default:return e}}(r,n):"string"==typeof r?function(e,r){switch(r.type){case"SET":return r.value;default:return e}}(r,n):Array.isArray(r)?function(e,r){switch(r.type){case"ADD":return[].concat(c(e),[r.value]);case"CONCAT":return[].concat(c(e),c(r.value));case"REMOVE_ALL":return[];case"REMOVE_IN":if(void 0!==r.where)return e.filter(function(e){return!r.where(e)});if(void 0===r.index&&(r.index=e.length-1),void 0!==r.index)return[].concat(c(e.slice(0,r.index)),c(e.slice(r.index+1)));case"SET_IN":if(void 0!==r.index)return[].concat(c(e.slice(0,r.index)),[r.value],c(e.slice(r.index+1)));if(void 0!==r.where)return e.map(function(e){return r.where(e)?r.value:e});case"SET_ALL":return e.map(function(e){return r.value});case"TOGGLE_IN":if(void 0!==r.index)return[].concat(c(e.slice(0,r.index)),[!e[r.index]],c(e.slice(r.index+1)));if(void 0!==r.where)return e.map(function(e){return r.where(e)?!e:e});case"TOGGLE_ALL":return e.map(function(e){return!e});case"INCREMENT_IN":if(void 0!==r.index)return[].concat(c(e.slice(0,r.index)),[e[r.index]+r.value],c(e.slice(r.index+1)));if(void 0!==r.where)return e.map(function(e){return r.where(e)?e+r.value:e});case"DECREMENT_IN":if(void 0!==r.index)return[].concat(c(e.slice(0,r.index)),[e[r.index]-r.value],c(e.slice(r.index+1)));if(void 0!==r.where)return e.map(function(e){return r.where(e)?e-r.value:e});case"INSERT":return[].concat(c(e.slice(0,r.index)),[r.value],c(e.slice(r.index)));case"INCREMENT_ALL":return e.map(function(e){return e+r.value});case"DECREMENT_ALL":return e.map(function(e){return e-r.value});case"MERGE_ALL":return e.map(function(e){return Object.assign(u({},e),r.value)});case"MERGE_IN":if(void 0!==r.index)return[].concat(c(e.slice(0,r.index)),[Object.assign(u({},e[r.index]),r.value)],c(e.slice(r.index+1)));if(void 0!==r.where)return e.map(function(e){return r.where(e)?Object.assign(u({},e),r.value):e});default:return e}}(r,n):"object"===(void 0===r?"undefined":t(r))?function(e,r){var n=a(r.type),l=n.verb,v=n.path;if(v){if("SET"===l)return void 0!==r.key?f(s(v,e),e,function(e){return u({},e,o({},r.key,r.value))}):void 0!==r.where?f(s(v,e),e,function(e){var n={};return Object.entries(e).forEach(function(e){var t=i(e,2),u=t[0],o=t[1];r.where(u,o)?n[u]=r.value:n[u]=o}),n}):f(s(v,e),e,function(){return r.value});if("INCREMENT_ALL"===l)return f(s(v,e),e,function(e){return e.map(function(e){return e+r.value})});if("INCREMENT_IN"===l){if(void 0!==r.index)return f(s(v,e),e,function(e){return[].concat(c(e.slice(0,r.index)),[e[r.index]+r.value],c(e.slice(r.index+1)))});if(void 0!==r.where)return f(s(v,e),e,function(e){return e.map(function(e){return r.where(e)?e+r.value:e})})}if("DECREMENT_ALL"===l)return f(s(v,e),e,function(e){return e.map(function(e){return e-r.value})});if("DECREMENT_IN"===l){if(void 0!==r.index)return f(s(v,e),e,function(e){return[].concat(c(e.slice(0,r.index)),[e[r.index]-r.value],c(e.slice(r.index+1)))});if(void 0!==r.where)return f(s(v,e),e,function(e){return e.map(function(e){return r.where(e)?e-r.value:e})})}if("INCREMENT"===l)return f(s(v,e),e,function(e){return e+r.value});if("TOGGLE"===l)return f(s(v,e),e,function(e){return!e});if("TOGGLE_IN"===l){if(void 0!==r.index)return f(s(v,e),e,function(e){return[].concat(c(e.slice(0,r.index)),[!e[r.index]],c(e.slice(r.index+1)))});if(void 0!==r.key)return f(s(v,e),e,function(e){return u({},e,o({},r.key,!e[r.key]))});if(void 0!==r.where)return f(s(v,e),e,function(e){if(Array.isArray(e))return e.map(function(e){return r.where(e)?!e:e});var n={};return Object.entries(e).forEach(function(e){var t=i(e,2),u=t[0],o=t[1];r.where(u,o)?n[u]=!o:n[u]=o}),n})}if("MERGE_IN"===l)return f(s(v,e),e,function(e){if(Array.isArray(e))return e.map(function(e){return r.where(e)?"object"===(void 0===e?"undefined":t(e))?Object.assign(u({},e),r.value):r.value:e});if("object"===(void 0===e?"undefined":t(e))){if(r.key&&"object"===t(r.value))return u({},e,o({},r.key,Object.assign(u({},e[r.key]),r.value)));if(r.key)return u({},e,o({},r.key,r.value))}});if("MERGE_ALL"===l)return f(s(v,e),e,function(e){var n={};return Object.entries(e).forEach(function(e){var t=i(e,2),o=t[0],c=t[1];n[o]=Object.assign(u({},c),r.value)}),n});if("ADD_TO"===l)return f(s(v,e),e,function(e){return[].concat(c(e),[r.value])});if("INSERT_IN"===l)return f(s(v,e),e,function(e){return[].concat(c(e.slice(0,r.index)),[r.value],c(e.slice(r.index)))});if("REMOVE_ALL"===l)return f(s(v,e),e,function(e){return[]});if("REMOVE_FROM"===l){if(void 0!==r.index)return f(s(v,e),e,function(e){return[].concat(c(e.slice(0,r.index)),c(e.slice(r.index+1)))});if(void 0!==r.where)return f(s(v,e),e,function(e){return e.filter(function(e){return!r.where(e)})})}if("SET_ALL"===l)return f(s(v,e),e,function(e){return e.map(function(e){return r.value})});if("SET_IN"===l){if(void 0!==r.index)return f(s(v,e),e,function(e){return[].concat(c(e.slice(0,r.index)),[r.value],c(e.slice(r.index+1)))});if(void 0!==r.where)return f(s(v,e),e,function(e){return e.map(function(e){return r.where(e)?r.value:e})})}if("TOGGLE_ALL"===l)return f(s(v,e),e,function(e){return e.map(function(e){return!e})})}switch(r.type){case"SET_ALL":var d={};return Object.keys(e).forEach(function(e){d[e]=r.value}),d;case"SET_IN":if(void 0!==r.key)return u({},e,o({},r.key,r.value));if(void 0!==r.where){var E={};return Object.entries(e).forEach(function(e){var n=i(e,2),t=n[0],u=n[1];r.where(t,u)?E[t]=r.value:E[t]=u}),E}case"MERGE_ALL":var y={};return Object.entries(e).forEach(function(e){var n=i(e,2),t=n[0],o=n[1];y[t]=Object.assign(u({},o),r.value)}),y;case"MERGE":return Object.assign(u({},e),r.value);case"REMOVE_ALL":return{};case"REMOVE_IN":if(void 0!==r.key)return object=u({},e),delete object[r.key],object;if(void 0!==r.where){var p={};return Object.entries(e).forEach(function(e){var n=i(e,2),t=n[0],u=n[1];r.where(t,u)||(p[t]=u)}),p}case"INCREMENT_IN":return u({},e,o({},r.key,e[r.key]+r.value));case"DECREMENT_IN":return u({},e,o({},r.key,e[r.key]-r.value));default:return e}}(r,n):void 0}}}])});
//# sourceMappingURL=dedux.js.map